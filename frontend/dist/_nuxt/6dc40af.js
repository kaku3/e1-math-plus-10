(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{611:function(t,e,n){t.exports=n.p+"img/characters.be5677b.png"},644:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return m}));var o,c=n(18),r=n(25),l=n(33),d=(n(64),n(59),n(158));!function(t){t[t.TOWNS_FORK=0]="TOWNS_FORK",t[t.HERALD=1]="HERALD",t[t.MERCHANT=2]="MERCHANT",t[t.BUCTCHER=3]="BUCTCHER",t[t.BLACKSMITH=4]="BLACKSMITH",t[t.ALCHEMIST=5]="ALCHEMIST",t[t.MAGICSHOPKEEPER=6]="MAGICSHOPKEEPER",t[t.THIEF=7]="THIEF",t[t.ARCHER=8]="ARCHER",t[t.MAGE=9]="MAGE",t[t.BISHOP=10]="BISHOP",t[t.EXECUTIONER=11]="EXECUTIONER",t[t.KNIGHT=12]="KNIGHT",t[t.HEAVYKNIGHT=13]="HEAVYKNIGHT",t[t.LARGEKNIGHT=14]="LARGEKNIGHT",t[t.ELITEKNIGHT=15]="ELITEKNIGHT",t[t.LARGEELITEKNIGHT=16]="LARGEELITEKNIGHT",t[t.SKINNYNUN=17]="SKINNYNUN",t[t.NORMALNUN=18]="NORMALNUN",t[t.FATNUN=19]="FATNUN",t[t.PRINCESS=20]="PRINCESS",t[t.QUEEN=21]="QUEEN",t[t.KING=22]="KING",t[t.MOUNTAINKING=23]="MOUNTAINKING"}(o||(o={}));var h=[{id:o.TOWNS_FORK,name:"FORK",status:{spx:1,spy:1,jp:1,life:1},mode:"",field:"",condition:"なし",cond:"GE",value:0,to:""},{id:o.HERALD,name:"HERALD",status:{spx:.95,spy:1,jp:1,life:1},mode:"modeSprint-30",field:"count",condition:"たして１０：３０問モードを10回",cond:"GE",value:10,to:"/game-plus-10/modeSprint-30"},{id:o.MERCHANT,name:"MERCHANT",status:{spx:1,spy:.95,jp:.95,life:1},mode:"modeSingle",field:"count",condition:"ヒトケタス：10回",cond:"GE",value:10,to:"/game-plus-single/modeSingle"},{id:o.BUCTCHER,name:"BUCTCHER",status:{spx:.95,spy:.95,jp:.95,life:1},mode:"minusSprint-30",field:"count",condition:"ひきざん２０：３０問モードを10回",cond:"GE",value:10,to:"/game-minus-20/minusSprint-30"},{id:o.BLACKSMITH,name:"BLACKSMITH",status:{spx:.8,spy:.95,jp:.95,life:1},mode:"mul99Sprint-30",field:"count",condition:"かけざん９９：３０問モードを10回",cond:"GE",value:10,to:"/game-mul-99/mul99Sprint-30"},{id:o.ALCHEMIST,name:"ALCHEMIST",status:{spx:.8,spy:.8,jp:.8,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード20秒",cond:"LE",value:20,to:"/game-plus-10/modeSprint-10"},{id:o.MAGICSHOPKEEPER,name:"MAGIC SHOPKEEPER",status:{spx:.6,spy:.6,jp:.6,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード8秒",cond:"LE",value:8,to:"/game-plus-10/modeSprint-10"},{id:o.THIEF,name:"THIEF",status:{spx:1.5,spy:1.3,jp:1.3,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード6秒",cond:"LE",value:6,to:"/game-plus-10/modeSprint-10"},{id:o.ARCHER,name:"ARCHER",status:{spx:1.2,spy:1.2,jp:1.2,life:1},mode:"modeSingle",field:"score",condition:"ヒトケタス：100万点",cond:"GE",value:1e6,to:"/game-plus-single/modeSingle"},{id:o.MAGE,name:"MAGE",status:{spx:1,spy:.9,jp:.9,life:2},mode:"modeSingle",field:"score",condition:"ヒトケタス：300万点",cond:"GE",value:3e6,to:"/game-plus-single/modeSingle"},{id:o.BISHOP,name:"BISHOP",status:{spx:1,spy:.9,jp:.9,life:2},mode:"modeSingle",field:"score",condition:"ヒトケタス：400万点",cond:"GE",value:4e6,to:"/game-plus-single/modeSingle"},{id:o.EXECUTIONER,name:"EXECUTIONER",status:{spx:1,spy:1,jp:1,life:2},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード30秒",cond:"LE",value:30,to:"/game-minus-20/minusSprint-10"},{id:o.KNIGHT,name:"KNIGHT",status:{spx:1,spy:1,jp:1,life:2},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード9秒",cond:"LE",value:9,to:"/game-minus-20/minusSprint-10"},{id:o.HEAVYKNIGHT,name:"HEAVY KNIGHT",status:{spx:.9,spy:1,jp:1,life:3},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード7秒",cond:"LE",value:7,to:"/game-minus-20/minusSprint-10"},{id:o.LARGEKNIGHT,name:"LARGE KNIGHT",status:{spx:.8,spy:.8,jp:.8,life:3},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード30秒",cond:"LE",value:30,to:"/game-mul-99/mul99Sprint-10"},{id:o.ELITEKNIGHT,name:"ELITE KNIGHT",status:{spx:1.1,spy:1.1,jp:1.1,life:2},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード10秒",cond:"LE",value:10,to:"/game-mul-99/mul99Sprint-10"},{id:o.LARGEELITEKNIGHT,name:"LARGE ELITE KNIGHT",status:{spx:1.1,spy:1,jp:1.1,life:3},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード8秒",cond:"LE",value:8,to:"/game-mul-99/mul99Sprint-10"},{id:o.SKINNYNUN,name:"SKINNY NUN",status:{spx:.8,spy:.8,jp:.8,life:2},mode:"maze20",field:"score",condition:"めいろ２０：5階",cond:"GE",value:5,to:"/game-maze-20"},{id:o.NORMALNUN,name:"NORMAL NUN",status:{spx:.9,spy:.9,jp:.9,life:2},mode:"maze20",field:"score",condition:"めいろ２０：15階",cond:"GE",value:15,to:"/game-maze-20"},{id:o.FATNUN,name:"FAT NUN",status:{spx:.7,spy:.7,jp:.7,life:2},mode:"maze20",field:"score",condition:"めいろ２０：クリア",cond:"GE",value:21,to:"/game-maze-20"},{id:o.PRINCESS,name:"PRINCESS",status:{spx:1,spy:1,jp:1,life:2},mode:"modeSprint-10",field:"count",condition:"たして１０：10問モード1000回",cond:"GE",value:1e3,to:"/game-plus-10/modeSprint-10"},{id:o.QUEEN,name:"QUEEN",status:{spx:1,spy:1,jp:1,life:3},mode:"modeSingle",field:"count",condition:"ヒトケタス：100回",cond:"GE",value:100,to:"/game-plus-single/modeSingle"},{id:o.KING,name:"KING",status:{spx:1.1,spy:1.1,jp:1.1,life:3},mode:"minusSprint-10",field:"count",condition:"ひきざん２０：10問モード500回",cond:"GE",value:500,to:"/game-minus-20/modeSprint-10"},{id:o.MOUNTAINKING,name:"MOUNTAIN KING",status:{spx:1.1,spy:1.1,jp:1.1,life:4},mode:"mul99Sprint-10",field:"count",condition:"かけざん９９：10問モード300回",cond:"GE",value:300,to:"/game-mul-99/modeSprint-10"}],m=function(){function t(){Object(r.a)(this,t);var e=sessionStorage.getItem("uid")||"";this.uid=e,this.save=this.newSave()}var e;return Object(l.a)(t,[{key:"newSave",value:function(){return{uid:this.uid,characterFlg:1,score:0,playCount:0}}},{key:"loadData",value:(e=Object(c.a)(regeneratorRuntime.mark((function t(){var e,q,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.a.firestore(),q=e.collection("jumpSaves").doc(this.save.uid),t.next=4,q.get();case 4:(n=t.sent).exists?this.save=n.data():q.set(this.save);case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"saveData",value:function(){d.a.firestore().collection("jumpSaves").doc(this.save.uid).set(this.save)}},{key:"hasCharacter",value:function(t){return 0!=(this.save.characterFlg&1<<t)}},{key:"getCharacter",value:function(t){this.save.characterFlg|=1<<t}}],[{key:"hasCharacters",value:function(t,e){return t.map((function(t){var n=e[t.field];return-1!=n&&(console.log(n,t.cond,t.value),"GE"==t.cond&&n>=t.value||"LE"==t.cond&&Math.floor(n)<=t.value)}))}}]),t}()},679:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(25),c=n(33),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:88675123;Object(o.a)(this,t),this.x=123456789,this.y=362436069,this.z=521288629,this.w=e}return Object(c.a)(t,[{key:"next",value:function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^t^t>>>8}},{key:"nextInt",value:function(t,e){return t+Math.abs(this.next())%(e+1-t)}},{key:"nextFloat1",value:function(){return this.nextInt(0,100)/100}}]),t}()},736:function(t,e,n){"use strict";n.r(e);var o,c,r,l,d,h,m,f,E,x,N,v=n(20),S=(n(40),n(94),n(902),n(903),n(64),n(2)),y=n(904),I=n.n(y),T=n(679),G=n(644),M=n.p+"assets/jump/se-jump.mp3",H=n.p+"assets/jump/se-landing.mp3",R=n.p+"assets/jump/se-dead.mp3",L=312;!function(t){t[t.NULL=0]="NULL",t[t.WALK=1]="WALK",t[t.JUMP0=2]="JUMP0",t[t.JUMP1=3]="JUMP1",t[t.JUMP2=4]="JUMP2",t[t.JUMP3=5]="JUMP3",t[t.JUMP4=6]="JUMP4"}(o||(o={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT"}(c||(c={}));var A=S.a.extend({data:function(){return{mode:"init",px:160,py:0,sx:56,sy:0,scrollY:0,sceneY:0,dir:c.RIGHT,status:o.NULL,statusNext:o.WALK,jp:0,time:0,score:0,life:0,character:G.b[0]}},mounted:function(){},methods:{init:function(t){var e=this;r&&r.destroy(),this.character=G.b[t];var canvas=document.querySelector("#game-canvas"),n=null==canvas?void 0:canvas.clientWidth,o=null==canvas?void 0:canvas.clientHeight;r=new I.a.Stage({container:"game-canvas",width:n,height:o}),l=new I.a.Layer,N=new I.a.Animation((function(t){e.exec(t)})),f=new I.a.Group({x:0,y:this.scrollY}),d=new I.a.Group,this.initConsole(d),E=this.initPlayer(f,t),l.add(f),l.add(d),r.add(l),this.initGamePad(),this.startGame()},initGamePad:function(){var t=this;r.on("touchstart",(function(){"game"==t.mode?t.status===o.WALK&&(t.statusNext=o.JUMP0):"over"==t.mode&&(t.$emit("over",t.score,t.character.id),N.stop())})),r.on("touchend",(function(){t.status===o.JUMP0&&(t.playSe("jump"),t.statusNext=o.JUMP1)}))},initConsole:function(t){h=new I.a.Text({x:8,y:8,text:"SCORE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),m=new I.a.Text({x:240,y:8,text:"LIFE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),t.add(h),t.add(m)},initMap:function(t){t.destroyChildren();var e=r.width();t.add(new I.a.Rect({x:0,y:0,width:e,height:64,fill:"#607D8B"})),this.setSteps(t,0)},setSteps:function(t,e){for(var n=new T.a((new Date).getTime()),o=[3,2,1,0,2,3,1,2,3,0,2],c=[4,8,6,0,5,4,12,6,4,0,6],l=Math.floor(r.width()/16),d=[{step:3,x0:0,x1:l,space:1},{step:2,x0:l/4,x1:3*l/4,space:3},{step:1,x0:l/3,x1:2*l/3,space:0}],h=function(l,h){for(var m=function(){var m=o[h%o.length];if(0===m)return"break";for(var f=c[h%o.length],E=d.find((function(t){return t.step===m})),x=0,N=[],v=E.x0+(l>>1)%2;v<E.x1;v+=2){var S=0;n.nextFloat1()<.6&&(S=n.nextInt(3,f)),S>0&&(x++,3==m&&x==m&&(S=E.x1-v),N.push({x:v,w:S}),v+=S+E.space)}if(x==m){var y=e*r.height();return N.forEach((function(e){var n=new I.a.Rect({x:16*e.x,y:-l-y,width:16*e.w,height:12,fill:"#607D8B"});t.add(n)})),"break"}};;){if("break"===m())break}},m=48,f=0;m<r.height();m+=48+48*n.nextInt(0,4)/4,f++)h(m,f);E.moveToTop();var x=1.5*r.height();t.getChildren((function(t){return t.getClientRect().y>x})).each((function(t){return t.destroy()}))},initPlayer:function(t,e){var o=32*e,c=this.px,r=this.py,g=new I.a.Group({x:c,y:r}),l=[0,1,2,3].flatMap((function(t){return[32*t,o,32,32]})),d=[0,1,2,3].flatMap((function(t){return[32*t+128,o,32,32]})),h=[64,o,32,32,64,o,32,32],m=[0,1,2,3].map((function(t){return[32*t+128,o,32,32,32*t+128,o,32,32]})),f=Object(v.a)(m,4),E=f[0],N=f[1],S=f[2],y=f[3],image=new Image;return image.onload=function(){x=new I.a.Sprite({x:0,y:0,scaleX:2,scaleY:2,offsetX:16,offsetY:32,image:image,animations:{idle:l,walk:d,jump0:h,jump1:E,jump2:N,jump3:S,jump4:y},animation:"idle",frameRate:10,frameIndex:0}),g.add(x),t.add(g),x.start()},image.src=n(611),g},execPlayer:function(t){if(x&&"game"==this.mode){var e=this.px,n=this.sx*this.character.status.spx*t.timeDiff/1e3;if(this.status!=this.statusNext)switch(this.status=this.statusNext,this.status){case o.WALK:x.animation("idle");break;case o.JUMP0:x.animation("jump0"),this.jp=0;break;case o.JUMP1:this.jp/=3,this.jp=Math.min(this.jp,400),x.animation("jump1"),console.log(this.jp);break;case o.JUMP2:x.animation("jump2");break;case o.JUMP3:x.animation("jump3");break;case o.JUMP4:x.animation("jump4"),this.score=Math.max(this.score,Math.floor(-this.py/32)),h.text("SCORE ".concat(this.score))}switch(this.status){case o.WALK:this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,L),this.px!==L&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.LEFT,x.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8!==this.px&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.RIGHT,x.scaleX(2))),E.x(this.px);break;case o.JUMP0:this.jp+=this.character.status.jp*t.timeDiff;break;case o.JUMP1:case o.JUMP3:if(this.px+=this.dir==c.RIGHT?n:-n,this.py-=this.jp*t.timeDiff/1e3,this.jp-=400*t.timeDiff/1e3,this.status==o.JUMP1&&this.jp<0&&(this.statusNext=o.JUMP2),this.status==o.JUMP3){var f=this.footCollision(this.px,this.py);if(f){var N=f.getClientRect();this.py=N.y-this.scrollY,this.statusNext=o.JUMP4,this.sy=Math.min(-this.py/40,48)}}this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,L),this.px===L&&(this.px=e,this.dir=c.LEFT,x.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8===this.px&&(this.px=e,this.dir=c.RIGHT,x.scaleX(2))),this.py>=0&&(this.py=0,this.statusNext=o.JUMP4),E.x(this.px),E.y(this.py);break;case o.JUMP2:this.statusNext=o.JUMP3;break;case o.JUMP4:this.playSe("landing"),this.statusNext=o.WALK}this.scrollY-(r.height()-64)-96>-this.py&&(0==--this.life?(this.mode="over",d.add(new I.a.Text({x:25,y:200,text:"GAME OVER",fontSize:30,fontFamily:"Press Start 2P",fill:"#FF5722"})),l.add(d)):this.py=-(this.scrollY+32),m.text("LIFE ".concat(this.life)),this.playSe("dead"))}},startGame:function(){this.initMap(f),this.px=r.width()/4,this.py=0,this.dir=c.RIGHT,this.status=o.NULL,this.statusNext=o.WALK,this.jp=0,this.time=0,this.score=0,this.life=this.character.status.life,this.scrollY=r.height()-64,this.calcSceneY(),m.text("LIFE ".concat(this.life)),this.mode="game",N.start()},calcSceneY:function(){this.sceneY=Math.floor(this.scrollY/r.height())},footCollision:function(t,e){e+=this.scrollY+4;var n=f.getChildren((function(n){if(n===E)return!1;var o=n.getClientRect();return o.x<=t&&o.x+o.width>=t&&o.y<=e&&o.y+o.height>=e}));return n.length>0?n[0]:null},exec:function(t){this.time+=t.timeDiff;var e=this.sceneY;this.status==o.WALK&&-this.py>this.scrollY-r.height()/2?this.scrollY+=64*t.timeDiff/1e3:this.scrollY+=this.sy*this.character.status.spy*t.timeDiff/1e3,this.calcSceneY(),e!=this.sceneY&&(console.log(e,this.sceneY,this.sy),this.setSteps(f,this.sceneY)),f.y(this.scrollY),this.execPlayer(t)},playSe:function(t){var e={jump:{f:M,v:.4},landing:{f:H,v:.4},dead:{f:R,v:.4}}[t],n=new Audio(e.f);n.volume=e.v,n.play()}}}),j=(n(942),n(80)),component=Object(j.a)(A,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"game-canvas"}})}),[],!1,null,"26797a90",null);e.default=component.exports},822:function(t,e,n){var content=n(943);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("4eaf013c",content,!0,{sourceMap:!1})},942:function(t,e,n){"use strict";n(822)},943:function(t,e,n){var o=n(22)(!1);o.push([t.i,"#game-canvas[data-v-26797a90]{width:320px;height:calc(100vh - 88px);background-color:#222}",""]),t.exports=o}}]);