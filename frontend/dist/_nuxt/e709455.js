(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{618:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var o=n(25),c=n(34),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:88675123;Object(o.a)(this,t),this.x=123456789,this.y=362436069,this.z=521288629,this.w=e}return Object(c.a)(t,[{key:"next",value:function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^t^t>>>8}},{key:"nextInt",value:function(t,e){return t+Math.abs(this.next())%(e+1-t)}},{key:"nextFloat1",value:function(){return this.nextInt(0,100)/100}}]),t}()},666:function(t,e,n){var content=n(716);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("e3900f24",content,!0,{sourceMap:!1})},706:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return f}));var o,c=n(18),h=n(25),r=n(34),l=(n(59),n(158));!function(t){t[t.TOWNS_FORK=0]="TOWNS_FORK",t[t.HERALD=1]="HERALD",t[t.MERCHANT=2]="MERCHANT",t[t.BUCTCHER=3]="BUCTCHER",t[t.BLACKSMITH=4]="BLACKSMITH",t[t.ALCHEMIST=5]="ALCHEMIST",t[t.MAGICSHOPKEEPER=6]="MAGICSHOPKEEPER",t[t.THIEF=7]="THIEF",t[t.ARCHER=8]="ARCHER",t[t.MAGE=9]="MAGE",t[t.BISHOP=10]="BISHOP",t[t.EXECUTIONER=11]="EXECUTIONER",t[t.KNIGHT=12]="KNIGHT",t[t.HEAVYKNIGHT=13]="HEAVYKNIGHT",t[t.LARGEKNIGHT=14]="LARGEKNIGHT",t[t.ELITEKNIGHT=15]="ELITEKNIGHT",t[t.LARGEELITEKNIGHT=16]="LARGEELITEKNIGHT",t[t.SKINNYNUN=17]="SKINNYNUN",t[t.NORMALNUN=18]="NORMALNUN",t[t.FATNUN=19]="FATNUN",t[t.PRINCESS=20]="PRINCESS",t[t.QUEEN=21]="QUEEN",t[t.KING=22]="KING",t[t.MOUNTAINKING=23]="MOUNTAINKING"}(o||(o={}));var d=[{id:o.TOWNS_FORK,name:"FORK",status:{spx:1,spy:1,jp:1,life:1},condition:"なし",cond:"GE",value:0},{id:o.HERALD,name:"HERALD",status:{spx:.95,spy:1,jp:1,life:1},condition:"たして１０：３０問モードを１０回",cond:"GE",value:10},{id:o.MERCHANT,name:"MERCHANT",status:{spx:1,spy:.95,jp:.95,life:1},condition:"ヒトケタス：１０回",cond:"GE",value:10},{id:o.BUCTCHER,name:"BUCTCHER",status:{spx:.95,spy:.95,jp:.95,life:1},condition:"ひきざん２０：３０問モードを１０回",cond:"GE",value:10},{id:o.BLACKSMITH,name:"BLACKSMITH",status:{spx:.8,spy:.95,jp:.95,life:1},condition:"かけざん９９：３０問モードを１０回",cond:"GE",value:10},{id:o.ALCHEMIST,name:"ALCHEMIST",status:{spx:.8,spy:.8,jp:.8,life:1},condition:"たして１０：１０問モード20秒",cond:"LE",value:20},{id:o.MAGICSHOPKEEPER,name:"MAGIC SHOPKEEPER",status:{spx:.6,spy:.6,jp:.6,life:1},condition:"たして１０：１０問モード8秒",cond:"LE",value:8},{id:o.THIEF,name:"THIEF",status:{spx:1.5,spy:1.3,jp:1.3,life:1},condition:"たして１０：１０問モード6秒",cond:"LE",value:6},{id:o.ARCHER,name:"ARCHER",status:{spx:1.2,spy:1.2,jp:1.2,life:1},condition:"ヒトケタス：100万点",cond:"GE",value:1e6},{id:o.MAGE,name:"MAGE",status:{spx:1,spy:.9,jp:.9,life:2},condition:"ヒトケタス：300万点",cond:"GE",value:3e6},{id:o.BISHOP,name:"BISHOP",status:{spx:1,spy:.9,jp:.9,life:2},condition:"ヒトケタス：400万点",cond:"GE",value:4e6},{id:o.EXECUTIONER,name:"EXECUTIONER",status:{spx:1,spy:1,jp:1,life:2},condition:"ひきざん２０：１０問モード30秒",cond:"LE",value:30},{id:o.KNIGHT,name:"KNIGHT",status:{spx:1,spy:1,jp:1,life:2},condition:"ひきざん２０：１０問モード9秒",cond:"LE",value:9},{id:o.HEAVYKNIGHT,name:"HEAVY KNIGHT",status:{spx:.9,spy:1,jp:1,life:3},condition:"ひきざん２０：１０問モード7秒",cond:"LE",value:7},{id:o.LARGEKNIGHT,name:"LARGE KNIGHT",status:{spx:.8,spy:.8,jp:.8,life:3},condition:"かけざん９９：１０問モード30秒",cond:"LE",value:30},{id:o.ELITEKNIGHT,name:"ELITE KNIGHT",status:{spx:1.1,spy:1.1,jp:1.1,life:2},condition:"かけざん９９：１０問モード10秒",cond:"LE",value:10},{id:o.LARGEELITEKNIGHT,name:"LARGE ELITE KNIGHT",status:{spx:1.1,spy:1,jp:1.1,life:3},condition:"かけざん９９：１０問モード8秒",cond:"LE",value:8},{id:o.SKINNYNUN,name:"SKINNY NUN",status:{spx:.8,spy:.8,jp:.8,life:2},condition:"めいろ２０：5階",cond:"GE",value:5},{id:o.NORMALNUN,name:"NORMAL NUN",status:{spx:.9,spy:.9,jp:.9,life:2},condition:"めいろ２０：15階",cond:"GE",value:15},{id:o.FATNUN,name:"FAT NUN",status:{spx:.7,spy:.7,jp:.7,life:2},condition:"めいろ２０：クリア",cond:"GE",value:21},{id:o.PRINCESS,name:"PRINCESS",status:{spx:1,spy:1,jp:1,life:2},condition:"たして１０：10問モード1000回",cond:"GE",value:1e3},{id:o.QUEEN,name:"QUEEN",status:{spx:1,spy:1,jp:1,life:3},condition:"ヒトケタス：1000回",cond:"GE",value:1e3},{id:o.KING,name:"KING",status:{spx:1.1,spy:1.1,jp:1.1,life:3},condition:"ひきざん２０：1000回",cond:"GE",value:1e3},{id:o.MOUNTAINKING,name:"MOUNTAIN KING",status:{spx:1.1,spy:1.1,jp:1.1,life:4},condition:"かけざん９９：1000回",cond:"GE",value:1e3}],f=function(){function t(){Object(h.a)(this,t);var e=sessionStorage.getItem("uid")||"";this.uid=e,this.save=this.newSave()}var e;return Object(r.a)(t,[{key:"newSave",value:function(){return{uid:this.uid,characterFlg:1,score:0,playCount:0}}},{key:"loadData",value:(e=Object(c.a)(regeneratorRuntime.mark((function t(){var e,q,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.a.firestore(),q=e.collection("jumpSaves").doc(this.save.uid),t.next=4,q.get();case 4:(n=t.sent).exists?this.save=n.data():q.set(this.save);case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"saveData",value:function(){l.a.firestore().collection("jumpSaves").doc(this.save.uid).set(this.save)}},{key:"hasCharacter",value:function(t){return 0!=(this.save.characterFlg&1<<t)}},{key:"getCharacter",value:function(t){this.save.characterFlg|=1<<t}}]),t}()},707:function(t,e,n){t.exports=n.p+"img/characters.be5677b.png"},715:function(t,e,n){"use strict";n(666)},716:function(t,e,n){var o=n(22)(!1);o.push([t.i,"#game-canvas[data-v-8d0cb2f0]{width:320px;height:480px;background-color:#222}",""]),t.exports=o},781:function(t,e,n){"use strict";n.r(e);var o,c,h,r,l,d,f,E,x,N,m,v=n(20),I=(n(39),n(94),n(789),n(790),n(64),n(2)),y=n(791),T=n.n(y),G=n(618),M=n(706),H=312;!function(t){t[t.NULL=0]="NULL",t[t.WALK=1]="WALK",t[t.JUMP0=2]="JUMP0",t[t.JUMP1=3]="JUMP1",t[t.JUMP2=4]="JUMP2",t[t.JUMP3=5]="JUMP3",t[t.JUMP4=6]="JUMP4"}(o||(o={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT"}(c||(c={}));var R=I.a.extend({data:function(){return{mode:"init",px:160,py:0,sx:56,sy:0,scrollY:0,sceneY:0,dir:c.RIGHT,status:o.NULL,statusNext:o.WALK,jp:0,time:0,score:0,life:0,character:M.b[0]}},mounted:function(){},methods:{init:function(t){var e=this;h&&h.destroy(),this.character=M.b[t];var canvas=document.querySelector("#game-canvas"),n=null==canvas?void 0:canvas.clientWidth,o=null==canvas?void 0:canvas.clientHeight;h=new T.a.Stage({container:"game-canvas",width:n,height:o}),r=new T.a.Layer,m=new T.a.Animation((function(t){e.exec(t)})),E=new T.a.Group({x:0,y:this.scrollY}),l=new T.a.Group,this.initConsole(l),x=this.initPlayer(E,t),r.add(E),r.add(l),h.add(r),this.initGamePad(),this.startGame()},initGamePad:function(){var t=this;h.on("touchstart",(function(){"game"==t.mode?t.status===o.WALK&&(t.statusNext=o.JUMP0):"over"==t.mode&&(t.$emit("over",t.score),m.stop())})),h.on("touchend",(function(){t.status===o.JUMP0&&(t.statusNext=o.JUMP1)}))},initConsole:function(t){d=new T.a.Text({x:8,y:8,text:"SCORE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),f=new T.a.Text({x:240,y:8,text:"LIFE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),t.add(d),t.add(f)},initMap:function(t){t.destroyChildren();var e=h.width();t.add(new T.a.Rect({x:0,y:0,width:e,height:64,fill:"#607D8B"})),this.setSteps(t,0)},setSteps:function(t,e){for(var n=new G.a((new Date).getTime()),o=[3,2,1,0,2,3,1,2,3,0,2],c=[2,6,6,0,3,4,2,3,3,0,6],r=Math.floor(h.width()/16),l=[{step:3,x0:0,x1:r,space:1},{step:2,x0:r/4,x1:3*r/4,space:3},{step:1,x0:r/3,x1:2*r/3,space:0}],d=function(r,d){for(var f=function(){var f=o[d%o.length];if(0===f)return"break";for(var E=c[d%o.length],x=l.find((function(t){return t.step===f})),N=0,m=[],v=x.x0+(r>>1)%2;v<x.x1;v+=2){var I=n.nextFloat1(),y=0;I<.6?y=n.nextInt(2,E):I<.65&&(y=2),y>0&&(N++,3==f&&N==f&&(y=x.x1-v),m.push({x:v,w:y}),v+=y+x.space)}if(N==f){var G=e*h.height();return m.forEach((function(e){var n=new T.a.Rect({x:16*e.x,y:-r-G,width:16*e.w,height:12,fill:"#607D8B"});t.add(n)})),"break"}};;){if("break"===f())break}},f=48,E=0;f<h.height();f+=48+48*n.nextInt(0,4)/4,E++)d(f,E);x.moveToTop();var N=1.5*h.height();t.getChildren((function(t){return t.getClientRect().y>N})).each((function(t){return t.destroy()}))},initPlayer:function(t,e){var o=32*e,c=this.px,h=this.py,g=new T.a.Group({x:c,y:h}),r=[0,1,2,3].flatMap((function(t){return[32*t,o,32,32]})),l=[0,1,2,3].flatMap((function(t){return[32*t+128,o,32,32]})),d=[64,o,32,32,64,o,32,32],f=[0,1,2,3].map((function(t){return[32*t+128,o,32,32,32*t+128,o,32,32]})),E=Object(v.a)(f,4),x=E[0],m=E[1],I=E[2],y=E[3],image=new Image;return image.onload=function(){N=new T.a.Sprite({x:0,y:0,scaleX:2,scaleY:2,offsetX:16,offsetY:32,image:image,animations:{idle:r,walk:l,jump0:d,jump1:x,jump2:m,jump3:I,jump4:y},animation:"idle",frameRate:10,frameIndex:0}),g.add(N),t.add(g),N.start()},image.src=n(707),g},execPlayer:function(t){if(N&&"game"==this.mode){var e=this.px,n=this.sx*this.character.status.spx*t.timeDiff/1e3;if(this.status!=this.statusNext)switch(this.status=this.statusNext,this.status){case o.WALK:N.animation("idle");break;case o.JUMP0:N.animation("jump0"),this.jp=0;break;case o.JUMP1:this.jp/=3,this.jp=Math.min(this.jp,400),N.animation("jump1"),console.log(this.jp);break;case o.JUMP2:N.animation("jump2");break;case o.JUMP3:N.animation("jump3");break;case o.JUMP4:N.animation("jump4"),this.score=Math.max(this.score,Math.floor(-this.py/32)),d.text("SCORE ".concat(this.score))}switch(this.status){case o.WALK:this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,H),this.px!==H&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.LEFT,N.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8!==this.px&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.RIGHT,N.scaleX(2))),x.x(this.px);break;case o.JUMP0:this.jp+=this.character.status.jp*t.timeDiff;break;case o.JUMP1:case o.JUMP3:if(this.px+=this.dir==c.RIGHT?n:-n,this.py-=this.jp*t.timeDiff/1e3,this.jp-=400*t.timeDiff/1e3,this.status==o.JUMP1&&this.jp<0&&(this.statusNext=o.JUMP2),this.status==o.JUMP3){var E=this.footCollision(this.px,this.py);if(E){var m=E.getClientRect();this.py=m.y-this.scrollY,this.statusNext=o.JUMP4,this.sy=-this.py/40}}this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,H),this.px===H&&(this.px=e,this.dir=c.LEFT,N.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8===this.px&&(this.px=e,this.dir=c.RIGHT,N.scaleX(2))),this.py>=0&&(this.py=0,this.statusNext=o.JUMP4),x.x(this.px),x.y(this.py);break;case o.JUMP2:this.statusNext=o.JUMP3;break;case o.JUMP4:this.statusNext=o.WALK}this.scrollY-(h.height()-64)-96>-this.py&&(0==--this.life?(this.mode="over",l.add(new T.a.Text({x:25,y:200,text:"GAME OVER",fontSize:30,fontFamily:"Press Start 2P",fill:"#FF5722"})),r.add(l)):this.py=-(this.scrollY+h.height()),f.text("LIFE ".concat(this.life)))}},startGame:function(){this.initMap(E),this.px=h.width()/4,this.py=0,this.dir=c.RIGHT,this.status=o.NULL,this.statusNext=o.WALK,this.jp=0,this.time=0,this.score=0,this.life=this.character.status.life,this.scrollY=h.height()-64,this.calcSceneY(),f.text("LIFE ".concat(this.life)),this.mode="game",m.start()},calcSceneY:function(){this.sceneY=Math.floor(this.scrollY/h.height())},footCollision:function(t,e){e+=this.scrollY+4;var n=E.getChildren((function(n){if(n===x)return!1;var o=n.getClientRect();return o.x<=t&&o.x+o.width>=t&&o.y<=e&&o.y+o.height>=e}));return n.length>0?n[0]:null},exec:function(t){this.time+=t.timeDiff;var e=this.sceneY;this.status==o.WALK&&-this.py>this.scrollY-h.height()/2?this.scrollY+=64*t.timeDiff/1e3:this.scrollY+=this.sy*this.character.status.spy*t.timeDiff/1e3,this.calcSceneY(),e!=this.sceneY&&(console.log(e,this.sceneY),this.setSteps(E,this.sceneY)),E.y(this.scrollY),this.execPlayer(t)}}}),L=(n(715),n(80)),component=Object(L.a)(R,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"game-canvas"}})}),[],!1,null,"8d0cb2f0",null);e.default=component.exports}}]);