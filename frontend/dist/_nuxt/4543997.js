(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{653:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(25),c=n(33),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:88675123;Object(o.a)(this,t),this.x=123456789,this.y=362436069,this.z=521288629,this.w=e}return Object(c.a)(t,[{key:"next",value:function(){var t;return t=this.x^this.x<<11,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^t^t>>>8}},{key:"nextInt",value:function(t,e){return t+Math.abs(this.next())%(e+1-t)}},{key:"nextFloat1",value:function(){return this.nextInt(0,100)/100}}]),t}()},654:function(t,e,n){t.exports=n.p+"img/characters.be5677b.png"},678:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f}));var o,c=n(18),r=n(25),h=n(33),d=(n(64),n(59),n(158));!function(t){t[t.TOWNS_FORK=0]="TOWNS_FORK",t[t.HERALD=1]="HERALD",t[t.MERCHANT=2]="MERCHANT",t[t.BUCTCHER=3]="BUCTCHER",t[t.BLACKSMITH=4]="BLACKSMITH",t[t.ALCHEMIST=5]="ALCHEMIST",t[t.MAGICSHOPKEEPER=6]="MAGICSHOPKEEPER",t[t.THIEF=7]="THIEF",t[t.ARCHER=8]="ARCHER",t[t.MAGE=9]="MAGE",t[t.BISHOP=10]="BISHOP",t[t.EXECUTIONER=11]="EXECUTIONER",t[t.KNIGHT=12]="KNIGHT",t[t.HEAVYKNIGHT=13]="HEAVYKNIGHT",t[t.LARGEKNIGHT=14]="LARGEKNIGHT",t[t.ELITEKNIGHT=15]="ELITEKNIGHT",t[t.LARGEELITEKNIGHT=16]="LARGEELITEKNIGHT",t[t.SKINNYNUN=17]="SKINNYNUN",t[t.NORMALNUN=18]="NORMALNUN",t[t.FATNUN=19]="FATNUN",t[t.PRINCESS=20]="PRINCESS",t[t.QUEEN=21]="QUEEN",t[t.KING=22]="KING",t[t.MOUNTAINKING=23]="MOUNTAINKING"}(o||(o={}));var l=[{id:o.TOWNS_FORK,name:"FORK",status:{spx:1,spy:1,jp:1,life:1},mode:"",field:"",condition:"なし",cond:"GE",value:0},{id:o.HERALD,name:"HERALD",status:{spx:.95,spy:1,jp:1,life:1},mode:"modeSprint-30",field:"count",condition:"たして１０：３０問モードを10回",cond:"GE",value:10},{id:o.MERCHANT,name:"MERCHANT",status:{spx:1,spy:.95,jp:.95,life:1},mode:"modeSingle",field:"count",condition:"ヒトケタス：10回",cond:"GE",value:10},{id:o.BUCTCHER,name:"BUCTCHER",status:{spx:.95,spy:.95,jp:.95,life:1},mode:"minusSprint-30",field:"count",condition:"ひきざん２０：３０問モードを10回",cond:"GE",value:10},{id:o.BLACKSMITH,name:"BLACKSMITH",status:{spx:.8,spy:.95,jp:.95,life:1},mode:"mul99Sprint-30",field:"count",condition:"かけざん９９：３０問モードを10回",cond:"GE",value:10},{id:o.ALCHEMIST,name:"ALCHEMIST",status:{spx:.8,spy:.8,jp:.8,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード20秒",cond:"LE",value:20},{id:o.MAGICSHOPKEEPER,name:"MAGIC SHOPKEEPER",status:{spx:.6,spy:.6,jp:.6,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード8秒",cond:"LE",value:8},{id:o.THIEF,name:"THIEF",status:{spx:1.5,spy:1.3,jp:1.3,life:1},mode:"modeSprint-10",field:"score",condition:"たして１０：１０問モード6秒",cond:"LE",value:6},{id:o.ARCHER,name:"ARCHER",status:{spx:1.2,spy:1.2,jp:1.2,life:1},mode:"modeSingle",field:"score",condition:"ヒトケタス：100万点",cond:"GE",value:1e6},{id:o.MAGE,name:"MAGE",status:{spx:1,spy:.9,jp:.9,life:2},mode:"modeSingle",field:"score",condition:"ヒトケタス：300万点",cond:"GE",value:3e6},{id:o.BISHOP,name:"BISHOP",status:{spx:1,spy:.9,jp:.9,life:2},mode:"modeSingle",field:"score",condition:"ヒトケタス：400万点",cond:"GE",value:4e6},{id:o.EXECUTIONER,name:"EXECUTIONER",status:{spx:1,spy:1,jp:1,life:2},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード30秒",cond:"LE",value:30},{id:o.KNIGHT,name:"KNIGHT",status:{spx:1,spy:1,jp:1,life:2},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード9秒",cond:"LE",value:9},{id:o.HEAVYKNIGHT,name:"HEAVY KNIGHT",status:{spx:.9,spy:1,jp:1,life:3},mode:"minusSprint-10",field:"score",condition:"ひきざん２０：１０問モード7秒",cond:"LE",value:7},{id:o.LARGEKNIGHT,name:"LARGE KNIGHT",status:{spx:.8,spy:.8,jp:.8,life:3},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード30秒",cond:"LE",value:30},{id:o.ELITEKNIGHT,name:"ELITE KNIGHT",status:{spx:1.1,spy:1.1,jp:1.1,life:2},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード10秒",cond:"LE",value:10},{id:o.LARGEELITEKNIGHT,name:"LARGE ELITE KNIGHT",status:{spx:1.1,spy:1,jp:1.1,life:3},mode:"mul99Sprint-10",field:"score",condition:"かけざん９９：１０問モード8秒",cond:"LE",value:8},{id:o.SKINNYNUN,name:"SKINNY NUN",status:{spx:.8,spy:.8,jp:.8,life:2},mode:"maze20",field:"score",condition:"めいろ２０：5階",cond:"GE",value:5},{id:o.NORMALNUN,name:"NORMAL NUN",status:{spx:.9,spy:.9,jp:.9,life:2},mode:"maze20",field:"score",condition:"めいろ２０：15階",cond:"GE",value:15},{id:o.FATNUN,name:"FAT NUN",status:{spx:.7,spy:.7,jp:.7,life:2},mode:"maze20",field:"score",condition:"めいろ２０：クリア",cond:"GE",value:21},{id:o.PRINCESS,name:"PRINCESS",status:{spx:1,spy:1,jp:1,life:2},mode:"modeSprint-10",field:"count",condition:"たして１０：10問モード1000回",cond:"GE",value:1e3},{id:o.QUEEN,name:"QUEEN",status:{spx:1,spy:1,jp:1,life:3},mode:"modeSingle",field:"count",condition:"ヒトケタス：1000回",cond:"GE",value:1e3},{id:o.KING,name:"KING",status:{spx:1.1,spy:1.1,jp:1.1,life:3},mode:"minusSprint-10",field:"count",condition:"ひきざん２０：10問モード1000回",cond:"GE",value:1e3},{id:o.MOUNTAINKING,name:"MOUNTAIN KING",status:{spx:1.1,spy:1.1,jp:1.1,life:4},mode:"mul99Sprint-10",field:"count",condition:"かけざん９９：10問モード1000回",cond:"GE",value:1e3}],f=function(){function t(){Object(r.a)(this,t);var e=sessionStorage.getItem("uid")||"";this.uid=e,this.save=this.newSave()}var e;return Object(h.a)(t,[{key:"newSave",value:function(){return{uid:this.uid,characterFlg:1,score:0,playCount:0}}},{key:"loadData",value:(e=Object(c.a)(regeneratorRuntime.mark((function t(){var e,q,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.a.firestore(),q=e.collection("jumpSaves").doc(this.save.uid),t.next=4,q.get();case 4:(n=t.sent).exists?this.save=n.data():q.set(this.save);case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"saveData",value:function(){d.a.firestore().collection("jumpSaves").doc(this.save.uid).set(this.save)}},{key:"hasCharacter",value:function(t){return 0!=(this.save.characterFlg&1<<t)}},{key:"getCharacter",value:function(t){this.save.characterFlg|=1<<t}}],[{key:"hasCharacters",value:function(t,e){return t.map((function(t){var n=e[t.field];return"GE"==t.cond&&n>=t.value||"LE"==t.cond&&Math.floor(n)<=t.value}))}}]),t}()},683:function(t,e,n){var content=n(729);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("209f17bb",content,!0,{sourceMap:!1})},728:function(t,e,n){"use strict";n(683)},729:function(t,e,n){var o=n(22)(!1);o.push([t.i,"#game-canvas[data-v-1513b7e0]{width:320px;height:calc(100vh - 88px);background-color:#222}",""]),t.exports=o},795:function(t,e,n){"use strict";n.r(e);var o,c,r,h,d,l,f,m,E,x,N,v=n(20),I=(n(39),n(94),n(803),n(804),n(64),n(2)),y=n(805),T=n.n(y),G=n(653),M=n(678),S=312;!function(t){t[t.NULL=0]="NULL",t[t.WALK=1]="WALK",t[t.JUMP0=2]="JUMP0",t[t.JUMP1=3]="JUMP1",t[t.JUMP2=4]="JUMP2",t[t.JUMP3=5]="JUMP3",t[t.JUMP4=6]="JUMP4"}(o||(o={})),function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT"}(c||(c={}));var H=I.a.extend({data:function(){return{mode:"init",px:160,py:0,sx:56,sy:0,scrollY:0,sceneY:0,dir:c.RIGHT,status:o.NULL,statusNext:o.WALK,jp:0,time:0,score:0,life:0,character:M.b[0]}},mounted:function(){},methods:{init:function(t){var e=this;r&&r.destroy(),this.character=M.b[t];var canvas=document.querySelector("#game-canvas"),n=null==canvas?void 0:canvas.clientWidth,o=null==canvas?void 0:canvas.clientHeight;r=new T.a.Stage({container:"game-canvas",width:n,height:o}),h=new T.a.Layer,N=new T.a.Animation((function(t){e.exec(t)})),m=new T.a.Group({x:0,y:this.scrollY}),d=new T.a.Group,this.initConsole(d),E=this.initPlayer(m,t),h.add(m),h.add(d),r.add(h),this.initGamePad(),this.startGame()},initGamePad:function(){var t=this;r.on("touchstart",(function(){"game"==t.mode?t.status===o.WALK&&(t.statusNext=o.JUMP0):"over"==t.mode&&(t.$emit("over",t.score,t.character.id),N.stop())})),r.on("touchend",(function(){t.status===o.JUMP0&&(t.statusNext=o.JUMP1)}))},initConsole:function(t){l=new T.a.Text({x:8,y:8,text:"SCORE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),f=new T.a.Text({x:240,y:8,text:"LIFE 0",fontSize:12,fontFamily:"Press Start 2P",fill:"#ECEFF1"}),t.add(l),t.add(f)},initMap:function(t){t.destroyChildren();var e=r.width();t.add(new T.a.Rect({x:0,y:0,width:e,height:64,fill:"#607D8B"})),this.setSteps(t,0)},setSteps:function(t,e){for(var n=new G.a((new Date).getTime()),o=[3,2,1,0,2,3,1,2,3,0,2],c=[4,8,6,0,5,4,12,6,4,0,6],h=Math.floor(r.width()/16),d=[{step:3,x0:0,x1:h,space:1},{step:2,x0:h/4,x1:3*h/4,space:3},{step:1,x0:h/3,x1:2*h/3,space:0}],l=function(h,l){for(var f=function(){var f=o[l%o.length];if(0===f)return"break";for(var m=c[l%o.length],E=d.find((function(t){return t.step===f})),x=0,N=[],v=E.x0+(h>>1)%2;v<E.x1;v+=2){var I=0;n.nextFloat1()<.6&&(I=n.nextInt(3,m)),I>0&&(x++,3==f&&x==f&&(I=E.x1-v),N.push({x:v,w:I}),v+=I+E.space)}if(x==f){var y=e*r.height();return N.forEach((function(e){var n=new T.a.Rect({x:16*e.x,y:-h-y,width:16*e.w,height:12,fill:"#607D8B"});t.add(n)})),"break"}};;){if("break"===f())break}},f=48,m=0;f<r.height();f+=48+48*n.nextInt(0,4)/4,m++)l(f,m);E.moveToTop();var x=1.5*r.height();t.getChildren((function(t){return t.getClientRect().y>x})).each((function(t){return t.destroy()}))},initPlayer:function(t,e){var o=32*e,c=this.px,r=this.py,g=new T.a.Group({x:c,y:r}),h=[0,1,2,3].flatMap((function(t){return[32*t,o,32,32]})),d=[0,1,2,3].flatMap((function(t){return[32*t+128,o,32,32]})),l=[64,o,32,32,64,o,32,32],f=[0,1,2,3].map((function(t){return[32*t+128,o,32,32,32*t+128,o,32,32]})),m=Object(v.a)(f,4),E=m[0],N=m[1],I=m[2],y=m[3],image=new Image;return image.onload=function(){x=new T.a.Sprite({x:0,y:0,scaleX:2,scaleY:2,offsetX:16,offsetY:32,image:image,animations:{idle:h,walk:d,jump0:l,jump1:E,jump2:N,jump3:I,jump4:y},animation:"idle",frameRate:10,frameIndex:0}),g.add(x),t.add(g),x.start()},image.src=n(654),g},execPlayer:function(t){if(x&&"game"==this.mode){var e=this.px,n=this.sx*this.character.status.spx*t.timeDiff/1e3;if(this.status!=this.statusNext)switch(this.status=this.statusNext,this.status){case o.WALK:x.animation("idle");break;case o.JUMP0:x.animation("jump0"),this.jp=0;break;case o.JUMP1:this.jp/=3,this.jp=Math.min(this.jp,400),x.animation("jump1"),console.log(this.jp);break;case o.JUMP2:x.animation("jump2");break;case o.JUMP3:x.animation("jump3");break;case o.JUMP4:x.animation("jump4"),this.score=Math.max(this.score,Math.floor(-this.py/32)),l.text("SCORE ".concat(this.score))}switch(this.status){case o.WALK:this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,S),this.px!==S&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.LEFT,x.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8!==this.px&&this.footCollision(this.px,this.py)||(this.px=e,this.dir=c.RIGHT,x.scaleX(2))),E.x(this.px);break;case o.JUMP0:this.jp+=this.character.status.jp*t.timeDiff;break;case o.JUMP1:case o.JUMP3:if(this.px+=this.dir==c.RIGHT?n:-n,this.py-=this.jp*t.timeDiff/1e3,this.jp-=400*t.timeDiff/1e3,this.status==o.JUMP1&&this.jp<0&&(this.statusNext=o.JUMP2),this.status==o.JUMP3){var m=this.footCollision(this.px,this.py);if(m){var N=m.getClientRect();this.py=N.y-this.scrollY,this.statusNext=o.JUMP4,this.sy=Math.min(-this.py/40,48)}}this.dir==c.RIGHT?(this.px+=n,this.px=Math.min(this.px,S),this.px===S&&(this.px=e,this.dir=c.LEFT,x.scaleX(-2))):(this.px-=n,this.px=Math.max(this.px,8),8===this.px&&(this.px=e,this.dir=c.RIGHT,x.scaleX(2))),this.py>=0&&(this.py=0,this.statusNext=o.JUMP4),E.x(this.px),E.y(this.py);break;case o.JUMP2:this.statusNext=o.JUMP3;break;case o.JUMP4:this.statusNext=o.WALK}this.scrollY-(r.height()-64)-96>-this.py&&(0==--this.life?(this.mode="over",d.add(new T.a.Text({x:25,y:200,text:"GAME OVER",fontSize:30,fontFamily:"Press Start 2P",fill:"#FF5722"})),h.add(d)):this.py=-(this.scrollY+32),f.text("LIFE ".concat(this.life)))}},startGame:function(){this.initMap(m),this.px=r.width()/4,this.py=0,this.dir=c.RIGHT,this.status=o.NULL,this.statusNext=o.WALK,this.jp=0,this.time=0,this.score=0,this.life=this.character.status.life,this.scrollY=r.height()-64,this.calcSceneY(),f.text("LIFE ".concat(this.life)),this.mode="game",N.start()},calcSceneY:function(){this.sceneY=Math.floor(this.scrollY/r.height())},footCollision:function(t,e){e+=this.scrollY+4;var n=m.getChildren((function(n){if(n===E)return!1;var o=n.getClientRect();return o.x<=t&&o.x+o.width>=t&&o.y<=e&&o.y+o.height>=e}));return n.length>0?n[0]:null},exec:function(t){this.time+=t.timeDiff;var e=this.sceneY;this.status==o.WALK&&-this.py>this.scrollY-r.height()/2?this.scrollY+=64*t.timeDiff/1e3:this.scrollY+=this.sy*this.character.status.spy*t.timeDiff/1e3,this.calcSceneY(),e!=this.sceneY&&(console.log(e,this.sceneY,this.sy),this.setSteps(m,this.sceneY)),m.y(this.scrollY),this.execPlayer(t)}}}),R=(n(728),n(80)),component=Object(R.a)(H,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"game-canvas"}})}),[],!1,null,"1513b7e0",null);e.default=component.exports}}]);